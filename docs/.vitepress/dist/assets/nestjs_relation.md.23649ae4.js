import{_ as s,c as n,o as a,a as l}from"./app.cf31d880.js";const i=JSON.parse('{"title":"typeorm\u5185\u5BB9\u5173\u7CFB","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u4E00\u5BF9\u4E00","slug":"\u4E00\u5BF9\u4E00"},{"level":2,"title":"\u4E00\u5BF9\u591A","slug":"\u4E00\u5BF9\u591A"},{"level":2,"title":"\u591A\u5BF9\u591A","slug":"\u591A\u5BF9\u591A"}],"relativePath":"nestjs/relation.md","lastUpdated":1663820867000}'),p={name:"nestjs/relation.md"},o=l(`<h1 id="typeorm\u5185\u5BB9\u5173\u7CFB" tabindex="-1">typeorm\u5185\u5BB9\u5173\u7CFB <a class="header-anchor" href="#typeorm\u5185\u5BB9\u5173\u7CFB" aria-hidden="true">#</a></h1><p>\u5728\u5199sql\u8BED\u53E5\u65F6\u7ECF\u5E38\u9700\u8981\u8FDE\u8868\u67E5\u8BE2\uFF0C\u8FD9\u65F6\u5C31\u4F1A\u6D89\u53CA\u5230\u6570\u636E\u8868\u4E4B\u95F4\u7684\u5185\u5BB9\u5173\u7CFB\u4E86\uFF0C\u5E38\u89C1\u7684\u5185\u5BB9\u5173\u7CFB\u6709\u4E00\u5BF9\u591A\u3001\u591A\u5BF9\u4E00\u3001\u591A\u5BF9\u591A\u7B49\u3002</p><h2 id="\u4E00\u5BF9\u4E00" tabindex="-1">\u4E00\u5BF9\u4E00 <a class="header-anchor" href="#\u4E00\u5BF9\u4E00" aria-hidden="true">#</a></h2><p>\u4E00\u5BF9\u4E00\u662F\u6307\u6570\u636E\u8868\u4E2D\u7684\u4E00\u6761\u6570\u636E\u4EC5\u5173\u8054\u53E6\u5916\u4E00\u4E2A\u8868\u7684\u4E00\u6761\u6570\u636E\u3002\u6BD4\u5982\u7528\u6237\u8868\u548C\u7528\u6237\u6863\u6848\u8868\uFF0C\u4E00\u4E2A\u7528\u6237\u53EA\u6709\u4E00\u4EFD\u6863\u6848\u3002 \u4E00\u5BF9\u4E00\u5173\u7CFB\u901A\u8FC7@OneToOne\u88C5\u9970\u5668\u6765\u88C5\u9970\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u8868\u793A\u5173\u8054\u7684\u662F\u54EA\u4E2A\u5B9E\u4F53\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u8868\u793A\u5173\u8054\u7684\u5B9E\u4F53\u4E2D\u5BF9\u5E94\u7684\u5B57\u6BB5\uFF08\u5916\u952E\uFF09\uFF0C@JoinColumn\u53EA\u80FD\u7528\u5728\u4E00\u4E2A\u5B9E\u4F53\u4E2D</p><div class="language-ts"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// user.entity.ts</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Entity</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserEntity</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">PrimaryGeneratedColumn</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Column</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">username</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">OneToOne</span><span style="color:#A6ACCD;">(type</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">InfoEntity</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">info</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">info</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">user)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">JoinColumn</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u9ED8\u8BA4\u751F\u6210\u7684\u662FinfoId\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7@JoinColumn({name:&#39;info_id&#39;})\u6307\u5B9A\u751F\u6210\u7684\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">info</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">InfoEntity</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-ts"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// info.entity.ts</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Entity</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">InfoEntity</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">PrimaryGeneratedColumn</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Column</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">idcard</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Column</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">gender</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">OneToOne</span><span style="color:#A6ACCD;">(type</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">UserEntity</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">user</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">info)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u4E00\u5BF9\u4E00\u5173\u7CFB\u4E2D\uFF0C\u5916\u952E\u53EF\u4EE5\u5728\u4EFB\u610F\u4E00\u65B9\u3002 \u4EE5\u4E0A\u4E24\u4E2A\u5B9E\u4F53\u751F\u6210\u7684\u6570\u636E\u8868\u5982\u4E0B\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">|                       user\u8868                                         |</span></span>
<span class="line"><span style="color:#A6ACCD;">+--------+--------------+-----+-----------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| Field  | Type         | Key | Default         | Extra                |</span></span>
<span class="line"><span style="color:#A6ACCD;">+--------+--------------+-----+-----------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| id     | int(11)      | PRI | NULL            | auto_increment       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| name   | varchar(255) |     | NULL            |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">| infoId | int(11)      | MUL | NULL            |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">+--------+--------------+-----+-----------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">|                       info\u8868                                         |</span></span>
<span class="line"><span style="color:#A6ACCD;">+--------+--------------+-----+-----------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| Field  | Type         | Key | Default         | Extra                |</span></span>
<span class="line"><span style="color:#A6ACCD;">+--------+--------------+-----+-----------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| id     | int(11)      | PRI | NULL            | auto_increment       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| idcard | varchar(255) |     | NULL            |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">| gender | varchar(255) |     | NULL            |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">+--------+--------------+-----+-----------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="\u4E00\u5BF9\u591A" tabindex="-1">\u4E00\u5BF9\u591A <a class="header-anchor" href="#\u4E00\u5BF9\u591A" aria-hidden="true">#</a></h2><p>\u4E00\u5BF9\u591A\u662F\u6307\u5728A\u8868\u4E2D\u7684\u4E00\u6761\u8BB0\u5F55\uFF0C\u53EF\u4EE5\u5173\u8054B\u8868\u4E2D\u7684\u4E00\u6761\u6216\u8005\u591A\u6761\u8BB0\u5F55\u3002\u6BD4\u5982\uFF1A\u4E00\u4E2A\u6587\u7AE0\u5206\u7C7B\u53EF\u4EE5\u5BF9\u5E94\u591A\u7BC7\u6587\u7AE0\uFF0C\u53CD\u8FC7\u6765\u4E00\u7BC7\u6587\u7AE0\u53EA\u80FD\u5C5E\u4E8E\u4E00\u4E2A\u5206\u7C7B\uFF0C\u8FD9\u79CD\u6587\u7AE0\u8868\u548C\u5206\u7C7B\u8868\u7684\u5173\u7CFB\u5C31\u662F\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\u3002 \u4E00\u5BF9\u591A\u4F7F\u7528@OneToMany()\u88C5\u9970\u5668\uFF0C\u591A\u5BF9\u4E00\u4F7F\u7528@ManyToOne()\u88C5\u9970\u5668\uFF0C\u5E76\u4E14\u4E24\u4E2A\u662F\u6210\u5BF9\u51FA\u73B0\u7684\u3002</p><div class="language-ts"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// category.entity.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">PostEntity</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">../../post/post.entity</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Entity</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">category</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CategoryEntity</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">PrimaryGeneratedColumn</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Column</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">OneToMany</span><span style="color:#A6ACCD;">(type</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">PostEntity</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">post</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">post</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">category)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">posts</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">PostEntity</span><span style="color:#A6ACCD;">[]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728category\u5B9E\u4F53\u4E2D\uFF0C\u4F7F\u7528@OneToMany()\u6307\u5B9A\u5173\u8054\u5230Post\u5B9E\u4F53\u4E2D\u7684category</p><div class="language-ts"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// post.entity.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">CategoryEntity</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">../../category/category.entity</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Entity</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">PostEntity</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">PrimaryGeneratedColumn</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Column</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">length</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">ManyToOne</span><span style="color:#A6ACCD;">(type</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">CategoryEntity</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">category</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">category</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">posts)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">JoinColumn</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">category_id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">category</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">CategoryEntity</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728Post\u5B9E\u4F53\u4E2D\u4F7F\u7528@ManyToOne()\u5173\u8054\u5927\u5C4Fcategory\u5B9E\u4F53\uFF0C\u5E76\u4E14\u5728\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\u4E2D\uFF0C@JoinColumn\u80AF\u5B9A\u662F\u5728Many\u7684\u4E00\u65B9\uFF0C\u4E5F\u53EA\u80FD\u5728Many\u7684\u4E00\u65B9\u3002</p><p>\u4EE5\u4E0A\u4E24\u4E2A\u5B9E\u4F53\u751F\u6210\u7684\u6570\u636E\u8868\u5982\u4E0B\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">|                       category\u8868                                         |</span></span>
<span class="line"><span style="color:#A6ACCD;">+--------+--------------+-----+-----------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| Field  | Type         | Key | Default         | Extra                |</span></span>
<span class="line"><span style="color:#A6ACCD;">+--------+--------------+-----+-----------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| id     | int(11)      | PRI | NULL            | auto_increment       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| name   | varchar(255) |     | NULL            |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">+--------+--------------+-----+-----------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">|                       post\u8868                                         |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| Field       | Type         | Key | Default    | Extra                |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| id          | int(11)      | PRI | NULL       | auto_increment       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| title       | varchar(50)  |     | NULL       |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">| category_id | int(11)      |     | NULL       |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="\u591A\u5BF9\u591A" tabindex="-1">\u591A\u5BF9\u591A <a class="header-anchor" href="#\u591A\u5BF9\u591A" aria-hidden="true">#</a></h2><p>\u5728\u591A\u5BF9\u591A\u5173\u7CFB\u4E2D\uFF0C\u8868A\u4E2D\u7684\u8BB0\u5F55\u53EF\u80FD\u4E0E\u8868B\u4E2D\u7684\u4E00\u4E2A\u6216\u8005\u591A\u4E2A\u8BB0\u5F55\u76F8\u5173\u8054\u3002\u4F8B\u5982\uFF0C\u6587\u7AE0\u548C\u6807\u7B7E\u4E4B\u95F4\uFF0C\u4E00\u7BC7\u6587\u7AE0\u53EF\u4EE5\u6709\u591A\u4E2A\u6807\u7B7E\uFF0C\u4E00\u4E2A\u6807\u7B7E\u53EF\u4EE5\u5BF9\u5E94\u591A\u7BC7\u6587\u7AE0\u3002</p><div class="language-ts"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// post.entity.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">TagEntity</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">../../tag/tag.entity</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Entity</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">PostEntity</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">PrimaryGeneratedColumn</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Column</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">length</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">ManyToMany</span><span style="color:#A6ACCD;">(type</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">tagEntity</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">posts</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">tag</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">tag</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">posts)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">JoinTable</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">post_tag</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;">//\u4E2D\u95F4\u8868\u7684\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">joinColumns</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">posy_id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">inverseJoinColumns</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tag_id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">tags</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">TagEntity</span><span style="color:#A6ACCD;">[]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-ts"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// tag.entity.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">PostEntity</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">../../post/post.entity</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Entity</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tag</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TagEntity</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">PrimaryGeneratedColumn</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">Column</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">length</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">ManyToMany</span><span style="color:#A6ACCD;">(type</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">PostEntity</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">post</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">post</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tags)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">posts</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">PostEntity</span><span style="color:#A6ACCD;">[]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u591A\u5BF9\u591A\u4F7F\u7528@ManyToMany()\u6765\u88C5\u9970\uFF0C\u5E76\u4E14\u4E24\u65B9\u90FD\u8981\u4F7F\u7528\uFF0C\u901A\u8FC7JoinTable\u751F\u6210\u4E00\u4E2A\u4E2D\u95F4\u8868\uFF0C\u901A\u8FC7\u914D\u7F6EjoinColumns\u548CinverseJoinColumns\u6765\u81EA\u5B9A\u4E49\u4E2D\u95F4\u8868\u7684\u5217\u540D\u79F0\u3002</p><p>\u4E0A\u9762\u7684\u5B9E\u4F53\u5173\u7CFB\u4F1A\u751F\u6210\u4EE5\u4E0B\u8868\uFF1A</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">|                       post\u8868                                         |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| Field       | Type         | Key | Default    | Extra                |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| id          | int(11)      | PRI | NULL       | auto_increment       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| title       | varchar(50)  |     | NULL       |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">| category_id | int(11)      |     | NULL       |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">|                       tag\u8868                                          |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| Field       | Type         | Key | Default    | Extra                |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| id          | int(11)      | PRI | NULL       | auto_increment       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| name        | varchar(50)  |     | NULL       |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">| category_id | int(11)      |     | NULL       |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">|                       post_tag\u8868                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| Field       | Type         | Key | Default    | Extra                |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| tag_id      | int(11)      | PRI | NULL       | auto_increment       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| post_id     | int(11)      |     | NULL       |                      |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-------------+--------------+-----+------------+----------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div>`,23),e=[o];function t(c,r,y,D,C,A){return a(),n("div",null,e)}var d=s(p,[["render",t]]);export{i as __pageData,d as default};
